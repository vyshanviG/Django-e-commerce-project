
{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>
/* Hero carousel */
.hero-carousel .carousel-item {
    height: 60vh; background-size: cover; background-position: center; position: relative;
}
.hero-carousel .overlay { position: absolute; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.5); }
.hero-carousel .carousel-caption { bottom: 20%; }

/* Category hover */
.category-card { transition: all 0.3s ease; }
.category-card:hover { transform: scale(1.1); background-color: purple; color:white; box-shadow:0 5px 15px rgba(0,0,0,0.3); cursor:pointer; }

/* Product card hover */
.card:hover { transform: translateY(-8px); box-shadow: 0 12px 25px rgba(0,0,0,0.2); transition: all 0.3s; }
.btn-outline-primary:hover { background-color: purple; color:white; border-color: purple; }
</style>

<!-- Hero / Carousel -->
<div id="heroCarousel" class="carousel slide hero-carousel mb-5" data-bs-ride="carousel">
  <div class="carousel-inner">
    <div class="carousel-item active" style="background-image: url('{% static "images/banner1.jpg" %}');">
      <div class="overlay"></div>
      <div class="carousel-caption text-center text-white">
        <h1>Welcome to Our Store</h1>
        <p>Discover Amazing Products Today</p>
        <a href="{% url 'product_list' %}" class="btn btn-primary btn-lg">Shop Now</a>
      </div>
    </div>
    <div class="carousel-item" style="background-image: url('{% static "images/banner2.jpg" %}');">
      <div class="overlay"></div>
      <div class="carousel-caption text-center text-white">
        <h1>New Arrivals</h1>
        <p>Check Out Our Latest Collection</p>
        <a href="{% url 'product_list' %}" class="btn btn-primary btn-lg">Explore</a>
      </div>
    </div>
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon"></span>
  </button>
</div>

<!-- Categories -->
<section class="py-5 bg-light">
  <div class="container">
    <h2 class="mb-4 text-center">Shop by Category</h2>
    <div class="row g-4">
      {% for category in categories %}
      <div class="col-6 col-md-3 text-center">
        <a href="{% url 'category_products' category.slug %}" class="text-decoration-none text-dark">
          <div class="category-card p-3 border rounded h-100 d-flex align-items-center justify-content-center flex-column">
            {% if category.image %}
            <img src="{{ category.image.url }}" alt="{{ category.name }}" class="img-fluid mb-2" style="max-height:80px;">
            {% endif %}
            <h5 class="mb-0">{{ category.name }}</h5>
          </div>
        </a>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<!-- Featured Products -->
<section class="py-5">
  <div class="container">
    <h2 class="mb-4 text-center">Featured Products</h2>
    <div class="row g-4">
      {% for product in products %}
      <div class="col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100">
          {% if product.image %}
          <img src="{{ product.image.url }}" class="card-img-top" alt="{{ product.title }}">
          {% endif %}
          <div class="card-body d-flex flex-column">
            <h5 class="card-title">{{ product.title }}</h5>
            <p class="card-text">${{ product.price|floatformat:2 }}</p>
            <div class="mt-auto d-flex justify-content-between">
              <a href="{% url 'product_detail' product.id %}" class="btn btn-outline-primary">View</a>
              <form method="post" action="{% url 'add_to_cart' product.id %}">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary">Add to Cart</button>
              </form>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

{% endblock %}